{/*
SPDX-FileCopyrightText: 2025 Jack Henry

SPDX-License-Identifier: Apache-2.0
*/}

import { Meta, ArgTypes } from '@storybook/blocks';
import * as stories from './table-header-cell.stories.js';

<Meta title="Components/Table Header Cell" of={stories} />

# Table Header Cell

[Guidelines](https://jackhenry.design/pages/components/table-header-cell/)

<hr />

The table header cell is used to display a column header. It should be placed inside a `<jh-table-row>` and contains text.
Hooks for sorting and a sorting icon are also provided.

## Usage

Import the `<jh-table-header-cell>` component:

```javascript
import '@jack-henry/jh-ui/components/table-header-cell/table-header-cell.js';
```

To use `<jh-table-header-cell>`:

```html
<jh-table-row slot="jh-table-header">
    <jh-table-header-cell>Header 1</jh-table-header-cell>
    <jh-table-header-cell>Header 2</jh-table-header-cell>
    <jh-table-header-cell>Header 3</jh-table-header-cell>
</jh-table-row>
```
## Sorting Event

The table component is set up so that authors can implement sorting. 
When a user activates a sortable header cell, a `jh-sort` event is dispatched. The event payload contains the column, sorted state, and id of the activated header cell. 
The actual sorting logic has to be implemented by authors.

To enable sorting, set the `sortable` attribute on the `<jh-table-header-cell>` element. 

- When `sortable` is set, the header cell will become a button and display a sort icon. 
- The `jh-sort` event is dispatched when the user clicks on the header cell.
- The `sorted` attribute can be set to `none` (default), `ascending` or `descending` to indicate the current sort order.
- The `sorted` attribute is updated automatically when the user clicks on the header cell. It circles through the three states in the order `none` - `ascending` - `descending`.
- Only one column can be sorted at a time. Whenever a new column is sorted, the previously sorted column is reset to `none`.

## Accessibility

This component satisfies [WCAG 2.2](https://www.w3.org/TR/WCAG22/) AA success criteria. 
The following success criteria are of concern:

- [WCAG 2.1.1 Keyboard](https://www.w3.org/WAI/WCAG22/Understanding/keyboard): All functionality of the content is operable through a keyboard interface without requiring specific timings for individual keystrokes, except where the underlying function requires input that depends on the path of the user's movement and not just the endpoints.
- [WCAG 2.4.6 Headings and Labels](https://www.w3.org/WAI/WCAG22/Understanding/headings-and-labels.html): Headings and labels describe topic or purpose.
- [WCAG 2.4.7 Focus Visible](https://www.w3.org/WAI/WCAG22/Understanding/focus-visible): Any keyboard operable user interface has a mode of operation where the keyboard focus indicator is visible.
- [WCAG 2.5.8 Target Size (Minimum)](https://www.w3.org/WAI/WCAG22/Understanding/target-size-minimum.html): The size of the target for pointer inputs is at least 24 by 24 CSS pixels, except where:
  - Spacing: Undersized targets (those less than 24 by 24 CSS pixels) are positioned so that if a 24 CSS pixel diameter circle is centered on the bounding box of each, the circles do not intersect another target or the circle for another undersized target;
  - Equivalent: The function can be achieved through a different control on the same page that meets this criterion;
  - Inline: The target is in a sentence or its size is otherwise constrained by the line-height of non-target text;
  - User agent control: The size of the target is determined by the user agent and is not modified by the author;
  - Essential: A particular presentation of the target is essential or is legally required for the information being conveyed.
- [WCAG 4.1.2 Name, Role, Value](https://www.w3.org/WAI/WCAG22/Understanding/name-role-value.html): For all user interface components (including but not limited to: form elements, links and components generated by scripts), the name and role can be programmatically determined; states, properties, and values that can be set by the user can be programmatically set; and notification of changes to these items is available to user agents, including assistive technologies.

### What we provide

- To satisfy [WCAG 2.1.1 Keyboard](https://www.w3.org/WAI/WCAG22/Understanding/keyboard), sortable table-header-cells can be reached by tabbing to them and activated by using the `Enter` or `Space` keys.
- To satisfy [WCAG 2.4.7 Focus Visible](https://www.w3.org/WAI/WCAG22/Understanding/focus-visible), we provide focus visible styles on sortable table-header-cells.
- To satisfy [WCAG 2.5.8 Target Size (Minimum)](https://www.w3.org/WAI/WCAG22/Understanding/target-size-minimum.html), by making the whole jh-table-header-cell clickable, we ensure that the target size for pointer inputs is at least 24 by 24 pixels for users to easily activate them.
- To satisfy [WCAG 4.1.2 Name, Role, Value](https://www.w3.org/WAI/WCAG22/Understanding/name-role-value.html), we set `aria-sort` on the jh-table-header-cell element to indicate the current sort order.

### Author Guidance

- To satisfy [WCAG 2.4.6 Headings and Labels](https://www.w3.org/WAI/WCAG22/Understanding/headings-and-labels.html), ensure the column headings are descriptive.

## Component API

For boolean attributes, true indicates that the attribute has been set without a value: `<jh-table-header-cell sortable></jh-table-header-cell>`. While false indicates the attribute does not exist in the DOM: `<jh-table-header-cell></jh-table-header-cell>`.

<ArgTypes />

## Feedback

Have an idea that will improve this component or have an issue to report? Let us know by submitting 
an issue on [GitHub](https://github.com/Banno/jack-henry-design-system/issues).

Engage with the community on our [GitHub discussion board](https://github.com/Banno/jack-henry-design-system/discussions).