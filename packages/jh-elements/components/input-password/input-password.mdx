import { Meta, ArgTypes } from '@storybook/blocks';
import * as stories from './input-password.stories.js';

<Meta title="Components/Input Password" of={stories} />

# Input Password

[Guidelines](https://jackhenry.design/pages/components/input-password/)

<hr />

The input password component provides a single-line text field that includes a toggle password button, allowing users to mask and unmask the input value. Input password extends off of the `jh-input` component which allows for the use of its properties, events, slots, methods, and styles. Refer to the [jh-input documentation](?path=/docs/components-input--docs) for detailed information on these features. 

## Usage

Import the `<jh-input-password>` component:

```javascript
import '@jack-henry/jh-elements/components/input-password/input-password.js';
```

To use `<jh-input-password>`: 

```html
<jh-input-password accessible-label-show-password="reveal text"></jh-input-password>
```

## Dependencies
The input password component makes use of both required compositional and suggested content related dependencies.

1. Composition - the following required dependencies are automatically imported:

- `<jh-input>`. [Input component documentation](?path=/docs/components-input--docs).
- `<jh-icon-eye>` and `<jh-icon-eye-slash>`. [Iconography documentation](?path=/docs/iconography-overview--docs).

2. Content -  the following suggested dependencies should be imported when needed: 

- `<jh-icon>`. [Iconography documentation](?path=/docs/iconography-overview--docs).

## Accessibility

This component satisfies [WCAG 2.2](https://www.w3.org/TR/WCAG22/) AA success criteria. 
The following success criteria are of concern:

- [WCAG 1.3.1 Info and Relationships](https://www.w3.org/WAI/WCAG22/Understanding/info-and-relationships.html): Information, structure, and relationships conveyed through presentation can be programmatically determined or are available in text.
- [WCAG 1.3.5 Identify Input Purpose](https://www.w3.org/WAI/WCAG22/Understanding/identify-input-purpose.html): The purpose of each input field collecting information about the user can be programmatically determined when:
  - The input field serves a purpose identified in the [Input Purposes for user interface components](https://www.w3.org/TR/WCAG22/#input-purposes) section; and
  - The content is implemented using technologies with support for identifying the expected meaning for form input data.
- [WCAG 1.4.1 Use of Color](https://www.w3.org/WAI/WCAG22/Understanding/use-of-color.html): Color is not used as the only visual means of conveying information, indicating an action, prompting a response, or distinguishing a visual element.
- [WCAG 1.4.4 Resize Text](https://www.w3.org/WAI/WCAG22/Understanding/resize-text.html): Except for captions and images of text, text can be resized without assistive technology up to 200 percent without loss of content or functionality.
- [WCAG 1.4.11 Non-text Contrast](https://www.w3.org/WAI/WCAG22/Understanding/non-text-contrast.html): The visual presentation of the following have a contrast ratio of at least 3:1 against adjacent color(s):
  - User Interface Components: visual information required to identify user interface components and states, except for inactive components or where the appearance of the component is determined by the user agent and not modified by the author;
  - Graphical Objects: parts of graphics required to understand the content, except when a particular presentation of graphics is essential to the information being conveyed.
- [WCAG 2.1.1 Keyboard](https://www.w3.org/WAI/WCAG22/Understanding/keyboard.html): All functionality of the content is operable through a keyboard interface without requiring specific timings for individual keystrokes, except where the underlying function requires input that depends on the path of the user's movement and not just the endpoints.
- [WCAG 2.4.6 Headings and Labels](https://www.w3.org/WAI/WCAG22/Understanding/headings-and-labels.html): Headings and labels describe topic or purpose.
- [WCAG 2.4.7 Focus Visible](https://www.w3.org/WAI/WCAG22/Understanding/focus-visible.html): Any keyboard operable user interface has a mode of operation where the keyboard focus indicator is visible.
- [WCAG 2.5.8 Target Size (Minimum)](https://www.w3.org/WAI/WCAG22/Understanding/target-size-minimum.html): The size of the target for pointer inputs is at least 24 by 24 CSS pixels, except where:
  - Spacing: Undersized targets (those less than 24 by 24 CSS pixels) are positioned so that if a 24 CSS pixel diameter circle is centered on the bounding box of each, the circles do not intersect another target or the circle for another undersized target;
  - Equivalent: The function can be achieved through a different control on the same page that meets this criterion;
  - Inline: The target is in a sentence or its size is otherwise constrained by the line-height of non-target text;
  - User agent control: The size of the target is determined by the user agent and is not modified by the author;
  - Essential: A particular presentation of the target is essential or is legally required for the information being conveyed.
- [WCAG 3.3.1 Error Identification](https://www.w3.org/WAI/WCAG22/Understanding/error-identification.html): If an input error is automatically detected, the item that is in error is identified and the error is described to the user in text.
- [WCAG 3.3.2 Labels or Instructions](https://www.w3.org/WAI/WCAG22/Understanding/labels-or-instructions.html): Labels or instructions are provided when content requires user input.
- [WCAG 3.3.3 Error Suggestion](https://www.w3.org/WAI/WCAG22/Understanding/error-suggestion.html): If an input error is automatically detected and suggestions for correction are known, then the suggestions are provided to the user, unless it would jeopardize the security or purpose of the content.
- [WCAG 3.3.8 Accessible Authentication](https://www.w3.org/WAI/WCAG22/Understanding/accessible-authentication-minimum): A cognitive function test (such as remembering a password or solving a puzzle) is not required for any step in an authentication process unless that step provides at least one of the following:
  - Alternative: Another authentication method that does not rely on a cognitive function test.
  - Mechanism: A mechanism is available to assist the user in completing the cognitive function test.
  - Object Recognition: The cognitive function test is to recognize objects.
  - Personal Content: The cognitive function test is to identify non-text content the user provided to the website.
- [WCAG 4.1.2 Name, Role, Value](https://www.w3.org/WAI/WCAG22/Understanding/name-role-value): For all user interface components (including but not limited to: form elements, links and components generated by scripts), the name and role can be programmatically determined; states, properties, and values that can be set by the user can be programmatically set; and notification of changes to these items is available to user agents, including assistive technologies.

### What we provide

In addition to the accessibility features provided by `jh-input`, `jh-input-password` provides the following:

- To satisfy [WCAG 2.1.1 Keyboard](https://www.w3.org/WAI/WCAG22/Understanding/keyboard.html), Enter or Space can be used to activate the toggle password button.
- To satisfy [WCAG 3.3.8 Accessible Authentication](https://www.w3.org/WAI/WCAG22/Understanding/accessible-authentication-minimum), the markup supports password entry by password managers, and users can copy and paste within the field to reduce memory load and cognitive burden of re-typing.

### Author Guidance

- To satisfy [WCAG 1.3.5 Identify Input Purpose](https://www.w3.org/WAI/WCAG22/Understanding/identify-input-purpose.html), use the `autocomplete` property to allow automated assistance in providing an input value.
- To satisy [WCAG 1.4.1 Use of Color](https://www.w3.org/WAI/WCAG22/Understanding/use-of-color.html), when using the `required` property and `show-indicator` attribute, include instructions at the top of the form to explain required inputs are marked with a red asterisk.
- To satisfy [WCAG 2.4.6 Headings and Labels](https://www.w3.org/WAI/WCAG22/Understanding/headings-and-labels.html) and [WCAG 3.3.2 Labels or Instructions](https://www.w3.org/WAI/WCAG22/Understanding/labels-or-instructions.html), ensure the `label` property or the `accessible-label` attribute are descriptive.
- To satisfy [WCAG 3.3.1 Error Identification](https://www.w3.org/WAI/WCAG22/Understanding/error-identification.html), set the `invalid` attribute to generate an `aria-invalid` attribute on input to indicate an error. Utilize the `error-text` attribute to provide feedback on a failed value.
- To satisfy [WCAG 3.3.3 Error Suggestion](https://www.w3.org/WAI/WCAG22/Understanding/error-suggestion.html), use the `error-text` attribute to provide a suggestion to correct the input error when appropriate.
- To satisfy [WCAG 4.1.2 Name, Role, Value](https://www.w3.org/WAI/WCAG22/Understanding/name-role-value), set the following accessible-labels when applicable:
    -  `accessible-label` to set an `aria-label` on the text field when a visible label cannot be used.
    - `accessible-label-clear-button` to set an `aria-label` on the clear button when used.
    - `accessible-label-hide-password` to set an `aria-label` on the toggle password button when the input value is unmasked. Should indicate that activating the button will result in a masked password.
    - `accessible-label-show-password` to set an `aria-label` on the toggle password button when the input value is masked. Should indicate that activating the button will result in an unmasked password.

## Component API

For boolean attributes, true indicates that the attribute has been set without a value: `<jh-input-password password-visible></jh-input-password>`. While false indicates the attribute does not exist in the DOM: `<jh-input-password></jh-input-password>`.

<ArgTypes />

## Feedback

Have an idea that will improve this component or have an issue to report? Let us know by submitting 
an issue on [GitHub](https://github.com/Banno/jack-henry-design-system/issues).

Engage with the community on our [GitHub discussion board](https://github.com/Banno/jack-henry-design-system/discussions).